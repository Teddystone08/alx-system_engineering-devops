#!/usr/bin/env bash
#Script creates file /var/run/myscript.pid
#Display to infinity and beyond indefinitely
#Display I hate the kill command when a SIGTERM signal
#Display Y u no love me?! when a SIGINT signal
#Delete file /var/run/myscript.pid and terminates when SIGQUIT or SIGTERM signal

# Create PID file
echo $$ > /var/run/myscript.pid

# Signal handling function
term_handler() {
  # Display message based on signal received
  if [[ $1 == "SIGTERM" ]]; then
    echo "I hate the kill command"
  elif [[ $1 == "SIGINT" ]]; then
    echo "Y U no love me?!"
  fi

  # Delete PID file and exit
  rm -f /var/run/myscript.pid
  exit 0
}

# Trap signals
trap term_handler SIGTERM
trap term_handler SIGINT
trap term_handler SIGQUIT

# Display message indefinitely
while true; do
  echo "To infinity and beyond"
  sleep 1
done
